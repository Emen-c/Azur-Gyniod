#start_situation = {
#	type = azur_R_situation_01
#	target = this
#}
azur_R_situation_01 = {
	desc = {
		text = azur_R_situation_01_desc
	}
	
	picture = GFX_azur_R_situation_01
	category = neutral					#positive/negative/neutral
	
	#图标
	fail_icon = GFX_azur_R_situation_fail_01
	#fail_icon_frame = GFX_situation_outcome_frame_red
	complete_icon = GFX_azur_R_situation_complete_01
	#complete_icon_frame = GFX_situation_outcome_frame_blue_azur_R
	
	#创建
	on_start = {
		set_country_flag = azur_R_situation_01_start
	}
	
	#局势进展完成（100）
	on_progress_complete = { 
		custom_tooltip = azur_R_situation_01_complete
		hidden_effect = {
			owner = {
				start_situation = {
					type = azur_R_situation_01
					target = this
				}
				owner = {
					random_situation = {
						limit = {
							is_situation_type = azur_R_situation_01
						}
						add_situation_progress = 46
					}
				}
				
			}
		}
	}
	
	#局势进度为0
	on_fail = { 
		custom_tooltip = azur_R_situation_01_fail
		hidden_effect = {
			owner = {
				start_situation = {
					type = azur_R_situation_01
					target = this
				}
				owner = {
					random_situation = {
						limit = {
							is_situation_type = azur_R_situation_01
						}
						add_situation_progress = -46
					}
				}
				
			}
		}
	}
	
	#取消局势
	#on_abort = { }
	#取消触发器
	abort_trigger = {
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
		}
	}

	start_value = 50
	#单双向
	progress_direction = bidirectional
	#用于双向
	complete_category = positive
	fail_category = negative
	
	#阶段
	stages = {
		#左半部分
		#血樱纷飞
		azur_R_stage_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_red
			end = 5
			on_first_enter = {
				owner = {
					set_country_flag = azur_R_stage_1_flag
					#弹窗
					country_event = { id = azur_R_nagato.5	days = 1 }
					country_event = { id = azur_R_nagato.7	days = 1 }
				}
				every_country = {
					limit = {
						is_country_type = default
						NOT = { is_same_value = root }
					}
					add_opinion_modifier = {
						who = ROOT
						modifier = opinion_azur_R_02
					}
				}
				#修正
				owner = { 
					set_variable = { which = azur_R_nagato_soul value = 0 } 
					set_country_flag = azur_R_building_colony_nagato_03_r_built
				}
			}
			modifier = {
				#正面
				country_naval_cap_mult = 1.00
				starbase_shipyard_build_speed_mult = 1.00
				planet_stability_add = 25
				ships_upkeep_mult = -0.40
				#负面
				starbase_shipyard_build_cost_mult = 0.30
				planet_pops_upkeep_mult = 0.30
			}
			custom_tooltip = azur_R_stage_1_tooltip
		}
		#天命
		azur_R_stage_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 30
			on_first_enter = {
				owner = {
					set_country_flag = azur_R_stage_2_flag
					country_event = { id = azur_R_nagato.4	days = 1 }
				}
			}
			modifier = {
				#正面
				country_naval_cap_mult = 0.50
				starbase_shipyard_build_speed_mult = 0.50
				planet_stability_add = 15
				ships_upkeep_mult = -0.20
				#负面
				starbase_shipyard_build_cost_mult = 0.20
				planet_pops_upkeep_mult = 0.20
			}
			custom_tooltip = azur_R_stage_2_tooltip
		}
		#狂热
		azur_R_stage_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 45
			on_first_enter = {
				owner = {
					set_country_flag = azur_R_stage_3_flag
					country_event = { id = azur_R_nagato.3	days = 1 }
				}
				every_country = {
					limit = {
						is_country_type = default
						NOT = { is_same_value = root }
					}
					add_opinion_modifier = {
						who = ROOT
						modifier = opinion_azur_R_01
					}
				}
			}
			modifier = {
				#正面
				country_naval_cap_mult = 0.25
				starbase_shipyard_build_speed_mult = 0.25
				planet_stability_add = 10
				ships_upkeep_mult = -0.10
				#负面
				starbase_shipyard_build_cost_mult = 0.10
				planet_pops_upkeep_mult = 0.10
			}
			custom_tooltip = azur_R_stage_3_tooltip
		}
		#开始
		#均衡
		azur_R_stage_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_green
			end = 55
			custom_tooltip = azur_R_stage_4_tooltip
		}
		#右半部分
		#止戈
		azur_R_stage_5 = {
			icon = GFX_situation_stage_5
			icon_background = GFX_azur_R_situation_severity_level_frame_blue
			end = 70
			on_first_enter = {
				owner = {
					set_country_flag = azur_R_stage_5_flag
					country_event = { id = azur_R_nagato.3	days = 1 }
				}
			}
			modifier = {
				#正面
				all_technology_research_speed = 0.15
				colony_start_num_pops_add = 1						#新殖民地人口
				pop_happiness = 0.10
				planet_building_build_speed_mult = 0.15
			}
			custom_tooltip = azur_R_stage_5_tooltip
		}
		#祈愿
		azur_R_stage_6 = {
			icon = GFX_situation_stage_6
			icon_background = GFX_azur_R_situation_severity_level_frame_blue
			end = 95
			on_first_enter = {
				owner = {
					set_country_flag = azur_R_stage_6_flag
					country_event = { id = azur_R_nagato.4	days = 1 }
				}
			}
			modifier = {
				#正面
				all_technology_research_speed = 0.25
				colony_start_num_pops_add = 1						#新殖民地人口
				country_government_civic_points_add = 1				#理念槽
				KANSEN_species_trait_points_add = 2
				pop_happiness = 0.15
				planet_building_build_speed_mult = 0.30
			}
			custom_tooltip = azur_R_stage_6_tooltip
		}
		#樱之守护
		azur_R_stage_7 = {
			icon = GFX_situation_stage_7
			icon_background = GFX_azur_R_situation_severity_level_frame_blue
			end = 100
			on_first_enter = {
				owner = {
					set_country_flag = azur_R_stage_7_flag
					country_event = { id = azur_R_nagato.6	days = 1 }
					country_event = { id = azur_R_nagato.7	days = 1 }
				}
				#修正
				owner = { 
					set_variable = { which = azur_R_nagato_faith value = 0 }
					set_country_flag = azur_R_building_colony_nagato_03_b_built
				}
			}
			modifier = {
				#正面
				all_technology_research_speed = 0.50
				colony_start_num_pops_add = 2						#新殖民地人口
				country_government_civic_points_add = 2				#理念槽
				KANSEN_species_trait_points_add = 4
				pop_happiness = 0.25
				planet_building_build_speed_mult = 0.50
				megastructure_build_speed_mult = 1.00
			}
			custom_tooltip = azur_R_stage_7_tooltip
		}
	}
	
	#每月进度
	monthly_progress = {
 		base = 0
		#红
		modifier = {
 			add = -0.075
 			desc = federation_acceptance_reduce_fleet
			#选项
 			AND = {
				current_situation_approach = azur_R_test_situation_approach_01
				current_stage = azur_R_stage_2
			}
 		}
		modifier = {
 			add = -0.075
 			desc = federation_acceptance_reduce_fleet
			#选项
 			AND = {
				current_situation_approach = azur_R_test_situation_approach_01
				current_stage = azur_R_stage_3
			}
 		}
		modifier = {
 			add = -0.1
 			desc = federation_acceptance_reduce_fleet
			#选项
 			AND = {
				current_situation_approach = azur_R_test_situation_approach_01
				current_stage = azur_R_stage_4
			}
 		}
		#蓝
		modifier = {
 			add = 0.1
 			desc = federation_acceptance_reduce_fleet
			#选项
 			AND = {
				current_situation_approach = azur_R_test_situation_approach_03
				current_stage = azur_R_stage_4
			}
 		}
		modifier = {
 			add = 0.075
 			desc = federation_acceptance_reduce_fleet
			#选项
 			AND = {
				current_situation_approach = azur_R_test_situation_approach_03
				current_stage = azur_R_stage_5
			}
 		}
		modifier = {
 			add = 0.075
 			desc = federation_acceptance_reduce_fleet
			#选项
 			AND = {
				current_situation_approach = azur_R_test_situation_approach_03
				current_stage = azur_R_stage_6
			}
 		}
 	}
	
	#选项
	#红
	approach = {
		name = azur_R_test_situation_approach_01
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_red
		potential = {
			NOR = { 
				current_stage = azur_R_stage_5
				current_stage = azur_R_stage_6
				current_stage = azur_R_stage_7
			}
		}
		on_select = {
			custom_tooltip = azur_R_test_situation_approach_01_tooltip
		}
		resources = {
			category = situations
			upkeep = {
				unity = 10
			}
		}
		target_modifier = {
			
		}
	}
	
	#保持现状
	approach = {
		name = azur_R_test_situation_approach_02
		icon = GFX_situation_approach_pop
		icon_background = GFX_situation_approach_bg_yellow
		default = yes
		on_select = {
			custom_tooltip = deficit_approach_do_nothing_tooltip
		}
		resources = {
			category = situations
		}
	}
	
	#蓝
	approach = {
		name = azur_R_test_situation_approach_03
		icon = GFX_situation_approach_influence
		icon_background = GFX_situation_approach_bg_green
		potential = {
			NOR = { 
				current_stage = azur_R_stage_1
				current_stage = azur_R_stage_2
				current_stage = azur_R_stage_3
			}
		}
		on_select = {
			custom_tooltip = azur_R_test_situation_approach_03_tooltip
		}
		resources = {
			category = situations
			upkeep = {
				unity = 10
			}
		}
		target_modifier = {
			
		}
	}
	
	#事件
	on_monthly = {
		events = {
			
 	    }
	}
}