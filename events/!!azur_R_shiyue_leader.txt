namespace = azur_shiyue_leader

country_event = {
	id = azur_shiyue_leader.1
	title = "azur_shiyue_leader.1.Name"
	desc = "azur_shiyue_leader.1.Desc"
	
	diplomatic = yes
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = azur_lane_gangqu_country
	}
	
	picture_event_data = {
		room = azur_lane_shiyue_room
	}
	
	option = { 
		name = 秘书
		hidden_effect = { 
			country_event = { 
				id = azur_shiyue_leader.10
			}
		}
	}
	
	option = { 
		name = 其他领袖
		hidden_effect = { 
			country_event = { 
				id = azur_shiyue_leader.20
			}
		}
	}
	
	option = { 
		name = 算了算了
		default_hide_option = yes
	}
}

#秘书选择
country_event = {
	id = azur_shiyue_leader.10
	title = "azur_shiyue_leader.10.Name"
	desc = "azur_shiyue_leader.10.Desc"
	picture = GFX_azurlane_shiyue_1
	location = FROM	
	is_triggered_only = yes
	immediate = {
		random_owned_leader = { limit = { is_azur_lane_leader = yes is_ruler = yes NOT = { has_trait = leader_azur_trait_shiyue } } save_event_target_as = azur_rulersy_1 }
	}
	option = { name = azur_shiyue_Leader.10.1 trigger = { event_target:azur_rulersy_1 = { exists = this } } hidden_effect = { event_target:azur_rulersy_1 = { save_event_target_as = azur_shiyue } country_event = { id = azur_shiyue_leader.11 } } }
	option = { name = "返回上一级" hidden_effect = { country_event = { id = azur_shiyue_leader.1 }	} }
	option = { name = "算了算了 " default_hide_option = yes }
}

#领袖
country_event = {
	id = azur_shiyue_leader.20
	title = "azur_shiyue_leader.20.Name"
	desc = "azur_shiyue_leader.20.Desc"
	picture = GFX_azurlane_shiyue_1
	location = FROM	
	is_triggered_only = yes
	immediate = {
		random_owned_leader = { limit = { is_azur_lane_leader = yes NOT = { has_trait = leader_azur_trait_shiyue } NOT = { is_ruler = yes } } save_event_target_as = azur_leadersy_1 }
		random_owned_leader = { limit = { is_azur_lane_leader = yes NOT = { has_trait = leader_azur_trait_shiyue } NOR = { is_ruler = yes is_same_value = event_target:azur_leadersy_1 } } save_event_target_as = azur_leadersy_2 }
		random_owned_leader = { limit = { is_azur_lane_leader = yes NOT = { has_trait = leader_azur_trait_shiyue } NOR = { is_ruler = yes is_same_value = event_target:azur_leadersy_1 is_same_value = event_target:azur_leadersy_2 } } save_event_target_as = azur_leadersy_3 }
		random_owned_leader = { limit = { is_azur_lane_leader = yes NOT = { has_trait = leader_azur_trait_shiyue } NOR = { is_ruler = yes is_same_value = event_target:azur_leadersy_1 is_same_value = event_target:azur_leadersy_2 is_same_value = event_target:azur_leadersy_3 } } save_event_target_as = azur_leadersy_4 }
		random_owned_leader = { limit = { is_azur_lane_leader = yes NOT = { has_trait = leader_azur_trait_shiyue } NOR = { is_ruler = yes is_same_value = event_target:azur_leadersy_1 is_same_value = event_target:azur_leadersy_2 is_same_value = event_target:azur_leadersy_3 is_same_value = event_target:azur_leadersy_4 } } save_event_target_as = azur_leadersy_5 }
		random_owned_leader = { limit = { is_azur_lane_leader = yes NOT = { has_trait = leader_azur_trait_shiyue } NOR = { is_ruler = yes is_same_value = event_target:azur_leadersy_1 is_same_value = event_target:azur_leadersy_2 is_same_value = event_target:azur_leadersy_3 is_same_value = event_target:azur_leadersy_4 is_same_value = event_target:azur_leadersy_5 } } save_event_target_as = azur_leadersy_6 }
		random_owned_leader = { limit = { is_azur_lane_leader = yes NOT = { has_trait = leader_azur_trait_shiyue } NOR = { is_ruler = yes is_same_value = event_target:azur_leadersy_1 is_same_value = event_target:azur_leadersy_2 is_same_value = event_target:azur_leadersy_3 is_same_value = event_target:azur_leadersy_4 is_same_value = event_target:azur_leadersy_5 is_same_value = event_target:azur_leadersy_6 } } save_event_target_as = azur_leadersy_7 }
		random_owned_leader = { limit = { is_azur_lane_leader = yes NOT = { has_trait = leader_azur_trait_shiyue } NOR = { is_ruler = yes is_same_value = event_target:azur_leadersy_1 is_same_value = event_target:azur_leadersy_2 is_same_value = event_target:azur_leadersy_3 is_same_value = event_target:azur_leadersy_4 is_same_value = event_target:azur_leadersy_5 is_same_value = event_target:azur_leadersy_6 is_same_value = event_target:azur_leadersy_7 } } save_event_target_as = azur_leadersy_8 }
	}
	option = { name = azur_shiyue_leader.20.Leader.1 trigger = { event_target:azur_leadersy_1 = { exists = this } } hidden_effect = { event_target:azur_leadersy_1 = { save_event_target_as = azur_shiyue } country_event = { id = azur_shiyue_leader.11 } } }
	option = { name = azur_shiyue_leader.20.Leader.2 trigger = { event_target:azur_leadersy_2 = { exists = this } } hidden_effect = { event_target:azur_leadersy_2 = { save_event_target_as = azur_shiyue } country_event = { id = azur_shiyue_leader.11 } } }
	option = { name = azur_shiyue_leader.20.Leader.3 trigger = { event_target:azur_leadersy_3 = { exists = this } } hidden_effect = { event_target:azur_leadersy_3 = { save_event_target_as = azur_shiyue } country_event = { id = azur_shiyue_leader.11 } } }
	option = { name = azur_shiyue_leader.20.Leader.4 trigger = { event_target:azur_leadersy_4 = { exists = this } } hidden_effect = { event_target:azur_leadersy_4 = { save_event_target_as = azur_shiyue } country_event = { id = azur_shiyue_leader.11 } } }
	option = { name = azur_shiyue_leader.20.Leader.5 trigger = { event_target:azur_leadersy_5 = { exists = this } } hidden_effect = { event_target:azur_leadersy_5 = { save_event_target_as = azur_shiyue } country_event = { id = azur_shiyue_leader.11 } } }
	option = { name = azur_shiyue_leader.20.Leader.6 trigger = { event_target:azur_leadersy_6 = { exists = this } } hidden_effect = { event_target:azur_leadersy_6 = { save_event_target_as = azur_shiyue } country_event = { id = azur_shiyue_leader.11 } } }
	option = { name = azur_shiyue_leader.20.Leader.7 trigger = { event_target:azur_leadersy_7 = { exists = this } } hidden_effect = { event_target:azur_leadersy_7 = { save_event_target_as = azur_shiyue } country_event = { id = azur_shiyue_leader.11 } } }
	option = { name = azur_shiyue_leader.20.Leader.8 trigger = { event_target:azur_leadersy_8 = { exists = this } } hidden_effect = { event_target:azur_leadersy_8 = { save_event_target_as = azur_shiyue } country_event = { id = azur_shiyue_leader.11 } } }
	option = { name = "别的女人" hidden_effect = { country_event = { id = azur_shiyue_leader.20 } } }
	option = { name = "返回上一级" hidden_effect = { country_event = { id = azur_shiyue_leader.1 } } }
	option = { name = "算了算了 " default_hide_option = yes }
}
#求婚
country_event = {
	id = azur_shiyue_leader.11
	title = "azur_shiyue_leader.11.Name"
	desc = "azur_shiyue_leader.11.Desc"
	
	diplomatic = yes
	is_triggered_only = yes
	
	picture_event_data = {
		portrait = event_target:azur_shiyue
		room = azur_lane_shiyue_room
	}
	
	option = { 
		name = "戴上戒指" 
		allow = { 
			#婚外星人的屑
			custom_tooltip = {
				fail_text = alien_geiyepa
				event_target:azur_shiyue = {
					is_azur_lane_leader = yes
				}
			}
			#有戒指
			custom_tooltip = {
				fail_text = have_1_azur_jiezhi
				check_variable = {
					which = azur_jiezhi
					value > 0
				}
			}
			#等级要求
			custom_tooltip = {
				fail_text = have_4_azur_leader_lv
				event_target:azur_shiyue = {
					has_level >= 10
				}
			}
		} 
		hidden_effect = { 
			change_variable = {
				which = azur_jiezhi
				value = -1
			}
			custom_tooltip = lose_1_azur_jiezhi
			country_event = { id = azur_shiyue_leader.12 }
		}
	}
	
	option = { name = "先买个戒指吧. " default_hide_option = yes }
}

#誓约特质
country_event = {
	id = azur_shiyue_leader.12
	title = "azur_shiyue_leader.12.Name"
	desc = "azur_shiyue_leader.12.Desc"
	
	diplomatic = yes
	is_triggered_only = yes
	
	picture_event_data = {
		portrait = event_target:azur_shiyue
		room = azur_lane_shiyue_room
	}
	
	immediate = {
		event_target:azur_shiyue = {
			add_trait = leader_azur_trait_shiyue
		}
		if = {
			limit = { 
				event_target:azur_shiyue = {
					has_leader_flag = azur_leader_tiancheng
				}
			}
			set_country_flag = al_tc_has_shiyue
		}
	}
	
	option = { 
		name = 牵手
		response_text = azur_shiyue_leader.12.peace
		default_hide_option = yes
	}
}