#明石（奸商）
namespace = azur_mingshi
#联络1
planet_event = {
	id = azur_mingshi.1
	title = azur_mingshi.1.name
	desc = azur_mingshi.1.desc
	picture = GFX_azurlane_mingshi_1
	location = root
	trackable = yes
	
	is_triggered_only = yes
	
	trigger = {
		owner = {
			NOT = { has_country_flag = azur_lane_shops_open }
		}
	}
	
	immediate = {
		owner = {
			set_country_flag = azur_lane_shops_open
		}
	}
	
	option = {
		name = azur_mingshi.1.a
		hidden_effect = {
			owner = {
				#戒指数量变量
				set_variable = { which = azur_jiezhi value = 0 }
				#buff年数变量
				set_variable = { which = azur_R_mingshi_buff_01 value = 1 }
				set_variable = { which = azur_R_mingshi_buff_02 value = 1 }
				set_variable = { which = azur_R_mingshi_buff_03 value = 1 }
				set_variable = { which = azur_R_mingshi_buff_04 value = 1 }
				set_variable = { which = azur_R_mingshi_buff_05 value = 1 }
				#后续
				country_event = { id = azur_mingshi.2 }
			}
		}
	}
}

#联络2
country_event = {
	id = azur_mingshi.2
	title = "azur_mingshi.2.title"
	desc = "azur_mingshi.2.desc"

	is_triggered_only = yes
	diplomatic = yes
	
	trigger = {
		has_country_flag = azur_lane_gangqu_country
	}
	
	picture_event_data = {
		portrait = AL_leader_明石_04
		room = azur_lane_shops2_room
	}

	option = {
		name = azur_mingshi.2.a
		response_text = azur_mingshi.2.a.response
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = azur_mingshi.3 }
		}
	}
}

#建立通讯
country_event = {
	id = azur_mingshi.3
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		has_country_flag = azur_lane_gangqu_country
	}

	immediate = {
		if = {
			limit = { NOT = { exists = event_target:azur_mingshi } }
			create_country = {
				name = "明石"
				type = azurl_mingshi
				flag = {
					icon = {
						category = "blocky"
						file = "flag_blocky_11.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"black"
						"black"
						"null"
						"null"
					}
				}
			}
			last_created_country = {
				establish_communications_no_message = root
				save_global_event_target_as = azur_mingshi
				#明石总督
				create_leader = {
					name = 明石
					species = event_target:azur_lane_leader_species
					class = official  				#official/scientist/random_ruler/commander
					skill = 1
					set_age = 12
					traits = {
						trait = leader_azur_trait_mingshi
					}
					
					gender = female
					set_is_female = yes
					event_leader = no
					hide_age = no

					custom_catch_phrase = AL_R_mingshi_phrase			#自定义
					custom_description = AL_R_mingshi_backstory			#背景词
					background_job = merchant
				}
				last_created_leader = {
					change_leader_portrait = AL_leader_明石_04
					set_leader_flag = azur_leader_mingshi  #领袖标记
					save_global_event_target_as = mingshi_leader #保存事件
					#新flag
					set_leader_flag = legendary_leader
					set_leader_flag = immune_to_negative_traits
					set_skill = 20
					while = {
						count = 9
						add_trait_no_notify = random_common
					}
					while = {
						count = 2
						add_leader_destiny_traits_AL_R = yes
					}
					set_leader_flag = should_not_have_upkeep
				}
			}
			event_target:azur_mingshi = {
				create_leader = {
					name = NAME_AL_R_Reines
					species = event_target:azur_lane_leader_species	
					class = random_ruler  				#official/scientist/random_ruler/commander
					skill = 1
					traits = {
						
					}
					
					gender = female
					set_is_female = yes
					event_leader = no
					hide_age = yes
					
					skip_background_generation = yes					#跳过背景生成
					custom_catch_phrase = AL_R_Reines_phrase			#自定义
					custom_description = AL_R_Reines_backstory			#背景词
					background_ethic = ethic_gestalt_consciousness
				}
				last_created_leader = {
					change_leader_portrait = AL_R_leader_萊妮絲_01
					set_leader_flag = azur_leader_萊妮絲  #领袖标记
					save_global_event_target_as = 萊妮絲_leader #保存事件
					#新flag
					set_leader_flag = legendary_leader
					set_leader_flag = immune_to_negative_traits
					set_skill = 20
					add_trait_no_notify = random_common
					remove_all_traits = yes
					add_trait_no_notify = leader_azur_trait_Reines_01
					add_trait_no_notify = leader_azur_trait_Reines_02
					add_trait_no_notify = leader_azur_trait_Reines_03
					add_trait_no_notify = leader_azur_trait_Reines_04
					add_trait_no_notify = leader_azur_trait_Reines_05
					add_trait_no_notify = leader_azur_trait_Reines_06
					add_trait_no_notify = leader_azur_trait_Reines_07
					add_trait_no_notify = leader_azur_trait_Reines_08
					set_leader_flag = should_not_have_upkeep
				}
			}
		}
		if = {
			limit = { exists = event_target:azur_mingshi }
			event_target:azur_mingshi = {
				establish_communications_no_message = root
			}
		}
	}
}

#明石礼物
country_event = {
	id = azur_mingshi.4
	title = "azur_mingshi.4.title"
	desc = "azur_mingshi.4.a.desc"
	desc = "azur_mingshi.4.b.desc"
	desc = "azur_mingshi.4.c.desc"
	desc = "azur_mingshi.4.d.desc"
	desc = "azur_mingshi.4.e.desc"
	desc = "azur_mingshi.4.f.desc"
	desc = "azur_mingshi.4.g.desc"
	desc = "azur_mingshi.4.h.desc"
	desc = "azur_mingshi.4.l.desc"
	
	diplomatic = yes
	is_triggered_only = yes
	
	picture_event_data = {
		portrait = AL_leader_明石_04
		room = azur_lane_shops2_room
	}

	trigger = {
		has_country_flag = azur_lane_shops_open
		has_country_flag = azur_lane_gangqu_country
		
	}
	
	immediate = {
		random_list = {
			1 = { set_country_flag = mingshi_gift_1 }
			1 = { set_country_flag = mingshi_gift_2 }
			1 = { set_country_flag = mingshi_gift_3 }
			1 = { set_country_flag = mingshi_gift_4 }
			1 = { set_country_flag = mingshi_gift_5 }
			1 = { set_country_flag = mingshi_gift_6 }
			1 = { set_country_flag = mingshi_gift_7 }
			1 = { set_country_flag = mingshi_gift_8 }
			1 = { set_country_flag = mingshi_gift_9 }
			1 = { set_country_flag = mingshi_gift_10 }
		}
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { sr_hongjianjian = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_1
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_1 }
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { energy = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_2
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_2 }
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { consumer_goods = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_3
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_3 }
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { sr_mofang = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_4
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_4 }
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { minerals = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_5
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_5 }
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { food = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_6
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_6 }
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { alloys = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_7
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_7 }
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { volatile_motes = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_8
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_8 }
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { exotic_gases = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_9
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_9 }
	}
	
	option = {
		name = azur_mingshi.4.d
		add_resource = { rare_crystals = 6480 }
		hidden_effect = {
			remove_country_flag = mingshi_gift_10
		}
		exclusive_trigger = { has_country_flag = mingshi_gift_10 }
	}
	
	option = { #关闭
		name = cara_home_exit
		trigger = { always = no } # just here to for the X button
		hidden_effect = {
			switch = {
				trigger = has_country_flag
				mingshi_gift_1 = {	remove_country_flag = mingshi_gift_1 }
				mingshi_gift_2 = {	remove_country_flag = mingshi_gift_2 }
				mingshi_gift_3 = {	remove_country_flag = mingshi_gift_3 }
				mingshi_gift_4 = {	remove_country_flag = mingshi_gift_4 }
				mingshi_gift_5 = {	remove_country_flag = mingshi_gift_5 }
				mingshi_gift_6 = {	remove_country_flag = mingshi_gift_6 }
				mingshi_gift_7 = {	remove_country_flag = mingshi_gift_7 }
				mingshi_gift_8 = {	remove_country_flag = mingshi_gift_8 }
				mingshi_gift_9 = {	remove_country_flag = mingshi_gift_9 }
				mingshi_gift_10 = {	remove_country_flag = mingshi_gift_10 }
			}
		}
		default_hide_option = yes
	}
}

#商店主菜单
country_event = {
	id = azur_mingshi.10
	title = "azur_mingshi.10.title"
	desc = "azur_mingshi.10.a.desc"
	desc = "azur_mingshi.10.b.desc"
	desc = "azur_mingshi.10.c.desc"
	desc = "azur_mingshi.10.d.desc"
	desc = "azur_mingshi.10.e.desc"

	diplomatic = yes
	is_triggered_only = yes
	custom_gui = "enclave_trader_window"				#UI样式

	picture_event_data = {
		portrait = AL_leader_明石_04
		room = azur_lane_shops_room
	}

	trigger = {
		from = { is_country_type = azurl_mingshi }
		#is_same_value = event_target:azur_mingshi
	}

	option = { #摸头
		name = azur_mingshi.10.a
		#response_text = azur_mingshi.10.a.response
		hidden_effect = {
			country_event = { id = azur_mingshi.11 }
		}
	}
	option = { #商店
		name = azur_mingshi.10.b
		#response_text = azur_mingshi.10.b.response
		hidden_effect = {
			country_event = { id = azur_mingshi.20 }
		}
	}
	option = { #明老板
		name = azur_mingshi.10.f
		custom_tooltip = "azur_mingshi.10.f.custom"
		trigger = {
			NOR = { 
				has_global_flag = azur_lane_R_mingshi_has
				has_country_flag = azur_R_mingshi_has
			}
		}
		hidden_effect = {
			country_event = { id = azur_mingshi.13 }
		}
	}
	option = { #萊妮絲の愛の密室
		name = azur_mingshi.10.g
		custom_tooltip = "azur_mingshi.10.g.custom"
		trigger = {
			NOT = { 
				has_country_flag = azur_R_galactic_emperor
			}
		}
		hidden_effect = {
			country_event = { id = azur_leader_lysm.10 }
		}
	}
	
	option = { #法令
		name = azur_mingshi.10.e
		hidden_effect = {
			country_event = { id = azur_mingshi.12 }
		}
	}
	option = { #离开
		name = azur_mingshi.10.d
		response_text = azur_mingshi.10.d.response
		default_hide_option = yes
	}
}

###摸头
#界面
country_event = {
	id = azur_mingshi.11
	title = azur_mingshi.11.title
	desc = "azur_mingshi.11.a.desc"
	desc = "azur_mingshi.11.b.desc"
	desc = "azur_mingshi.11.c.desc"
	desc = "azur_mingshi.11.d.desc"
	desc = "azur_mingshi.11.e.desc"
	desc = "azur_mingshi.11.f.desc"
	custom_gui = "enclave_trader_window"

	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = AL_leader_明石_04
		room = azur_lane_shops_room
	}

	option = { #摸头
		custom_gui = "enclave_trader_option"
		name = azur_mingshi.10.a
		hidden_effect = {
			country_event = { id = azur_mingshi.11 }
		}
	}

	option = { #离开
		custom_gui = "enclave_trader_option"
		name = azur_mingshi.11.b
		#azur_return_shops = yes
		default_hide_option = yes
	}
}

#特殊法令
country_event = {
	id = azur_mingshi.12
	title = azur_mingshi.12.title
	desc = "azur_mingshi.12.a.desc"
	picture = GFX_azurlane_mingshi_1
	location = root
	trackable = yes
	
	is_triggered_only = yes

	option = { #立绘恢复
		#custom_gui = "enclave_trader_option"
		name = azur_mingshi.12.a
		hidden_effect = {
			country_event = { id = azur_R_portrait.1 }
		}
	}

	option = { #损管
		#custom_gui = "enclave_trader_option"
		name = azur_mingshi.12.b
		hidden_effect = {
			country_event = { id = azur_leader.100 }
		}
	}

	option = { #誓约
		#custom_gui = "enclave_trader_option"
		name = azur_mingshi.12.c
		hidden_effect = {
			country_event = { id = azur_shiyue_leader.1 }
		}
	}
	
	option = { #换装
		#custom_gui = "enclave_trader_option"
		name = azur_mingshi.12.d
		hidden_effect = {
			country_event = { id = azur_leader_gallery.1000 }
		}
	}

	option = { #离开
		#custom_gui = "enclave_trader_option"
		name = azur_mingshi.11.b
		default_hide_option = yes
	}
}

#获取明石总督
country_event = {
	id = azur_mingshi.13
	title = "azur_mingshi.13.title"
	desc = "azur_mingshi.13.desc"
	custom_gui = "enclave_trader_window"
	
	diplomatic = yes
	is_triggered_only = yes
	
	picture_event_data = {
		portrait = AL_leader_明石_04
		room = azur_lane_shops2_room
	}

	trigger = {
		has_country_flag = azur_lane_shops_open
		has_country_flag = azur_lane_gangqu_country
		NOT = { has_global_flag = azur_lane_R_mingshi_has }
	}
	
	immediate = {
	}
	
	option = {
		name = azur_mingshi.13.a
		hidden_effect = {
			set_global_flag = azur_lane_R_mingshi_has
			set_country_flag = azur_R_mingshi_has
			clone_leader = {
				target = event_target:mingshi_leader
				effect = { 
					change_leader_portrait = AL_leader_明石_04
					set_leader_flag = azur_leader_mingshi  #领袖标记
					save_global_event_target_as = mingshi_leader #保存事件
					#新flag
					set_leader_flag = legendary_leader
					set_leader_flag = immune_to_negative_traits
					set_skill = 20
					add_trait_no_notify = random_common
					remove_all_traits = yes
					add_trait_no_notify = leader_azur_trait_mingshi
					while = {
						count = 9
						add_trait_no_notify = random_common
					}
					while = {
						count = 2
						add_leader_destiny_traits_AL_R = yes
					}
					set_leader_flag = should_not_have_upkeep
					change_background_job = merchant
				}
			}
			add_modifier = {
				modifier = "azur_R_mingshi_yingyezhong"
				days = -1
			}
		}
	}
	
	option = {
		name = azur_mingshi.13.b
		default_hide_option = yes
		hidden_effect = {
			
		}
	}
}

#明石技能
country_event = {
	id = azur_mingshi.14
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = azur_lane_gangqu_country
		has_country_flag = azur_R_mingshi_has
		exists = event_target:mingshi_leader
	}
	
	immediate = {
		random_planet_within_border = {
			limit = { 
				habitable_planet = no
				is_artificial = no
				NOR = {
					is_planet_class = pc_ringworld_habitable_damaged
					is_planet_class = pc_ringworld_tech_damaged
					is_planet_class = pc_ringworld_tech
					is_planet_class = pc_ringworld_seam
					is_planet_class = pc_ringworld_seam_damaged
				}
				# check that the random list won't come up empty
				OR = {
					energy_candidate = yes
					mineral_candidate = yes
					research_candidate = yes
					alloy_candidate = yes
					exotic_gas_candidate = yes
					rare_crystal_candidate = yes
					volatile_motes_candidate = yes
					#ROOT = { is_gestalt = no }
				}
			}
			save_event_target_as = chosen_planet
		}		
		random_list = {
			# Energy
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { energy_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_energy_5 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { energy_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_energy_7 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { energy_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_energy_9 }
				}
			}

			# Minerals
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { mineral_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_minerals_5 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { mineral_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_minerals_7 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { mineral_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_minerals_9 }
				}
			}

			# Physics
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { research_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_physics_5 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { research_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_physics_7 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { research_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_physics_9 }
				}
			}

			# Society
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { research_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_society_5 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { research_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_society_7 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { research_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_society_9 }
				}
			}

			# Engineering
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { research_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_engineering_5 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { research_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_engineering_7 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { research_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_engineering_9 }
				}
			}

			# Trade

			# Alloys
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { alloy_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_alloys_5 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { alloy_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_alloys_7 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { alloy_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_alloys_9 }
				}
			}

			# Exotic Gas
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { exotic_gas_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_exotic_gases_3 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { exotic_gas_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_exotic_gases_4 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { exotic_gas_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_exotic_gases_5 }
				}
			}

			# Rare Crystals
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { rare_crystal_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_rare_crystals_3 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { rare_crystal_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_rare_crystals_4 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { rare_crystal_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_rare_crystals_5 }
				}
			}

			# Volatile Motes
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { volatile_motes_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_volatile_motes_3 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { volatile_motes_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_volatile_motes_4 }
				}
			}
			10 = {
				modifier = {
					factor = 0
					event_target:chosen_planet = { volatile_motes_candidate = no }
				}
				while = {
					count = 5
					event_target:chosen_planet = { add_deposit = d_volatile_motes_5 }
				}
			}
		}
		event_target:chosen_planet = {
			if = {
				limit = {
					has_deposit_for = shipclass_mining_station
					has_mining_station = no
				}
				create_mining_station = {
					owner = ROOT
				}
			}
			if = {
				limit = {
					has_deposit_for = shipclass_research_station
					has_research_station = no
				}
				create_research_station = {
					owner = ROOT
				}
			}
		}	
	}
}


#商店界面
country_event = {
	id = azur_mingshi.20
	title = azur_mingshi.20.title
	desc = "azur_mingshi.20.a.desc"
	desc = "azur_mingshi.20.b.desc"
	desc = "azur_mingshi.20.c.desc"
	is_triggered_only = yes
	diplomatic = yes

	custom_gui = AZUR_R_商店_UI 								#界面
	
	immediate = {
		set_country_flag = AL_R_商店_主界面
	}
	
	after = {
		remove_country_flag = AL_R_商店_主界面
	}
	
	option = { #
		name = azur_event_opinion
		default_hide_option = yes
	}
}

#钻石商店
country_event = {
	id = azur_mingshi.22
	title = azur_mingshi.22.title
	desc = "azur_mingshi.22.a.desc"
	is_triggered_only = yes
	diplomatic = yes

	custom_gui = AZUR_R_商店_UI 								#界面
	
	immediate = {
		set_country_flag = AL_R_商店_钻石商店
	}
	
	after = {
		remove_country_flag = AL_R_商店_钻石商店
	}
	
	option = { #
		name = azur_event_opinion
		default_hide_option = yes
	}
}

#资源
country_event = {
	id = azur_mingshi.23
	title = azur_mingshi.23.title
	desc = "azur_mingshi.23.a.desc"
	desc = "azur_mingshi.23.b.desc"
	desc = "azur_mingshi.23.c.desc"
	is_triggered_only = yes
	diplomatic = yes

	custom_gui = AZUR_R_商店_UI 								#界面
	
	immediate = {
		set_country_flag = AL_R_商店_资源商店
	}
	
	after = {
		remove_country_flag = AL_R_商店_资源商店
	}
	
	option = { #
		name = azur_event_opinion
		default_hide_option = yes
	}
}

#科技
country_event = {
	id = azur_mingshi.24
	title = azur_mingshi.24.title
	desc = "azur_mingshi.24.a.desc"
	desc = "azur_mingshi.24.b.desc"
	desc = "azur_mingshi.23.c.desc"
	is_triggered_only = yes
	diplomatic = yes

	custom_gui = AZUR_R_商店_UI 								#界面
	
	immediate = {
		set_country_flag = AL_R_商店_特殊科技
	}
	
	after = {
		remove_country_flag = AL_R_商店_特殊科技
	}
	
	option = { #
		name = azur_event_opinion
		default_hide_option = yes
	}
}

#buff
country_event = {
	id = azur_mingshi.25
	title = azur_mingshi.25.title
	desc = "azur_mingshi.25.a.desc"
	desc = "azur_mingshi.25.b.desc"
	desc = "azur_mingshi.25.c.desc"
	is_triggered_only = yes
	diplomatic = yes

	custom_gui = AZUR_R_商店_UI 								#界面
	
	immediate = {
		set_country_flag = AL_R_商店_专属BUFF
	}
	
	after = {
		remove_country_flag = AL_R_商店_专属BUFF
	}
	
	option = { #
		name = azur_event_opinion
		default_hide_option = yes
	}
}

#使用年数记录（）
country_event = {
	id = azur_mingshi.26
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_country_flag = azur_lane_gangqu_country
	}
	
	immediate = {
		if = {
			limit = {
				has_modifier = azur_R_mingshi_buff_01
			}
			change_variable = {
				which = azur_R_mingshi_buff_01
				value = 1
			}
			remove_modifier = azur_R_mingshi_buff_01
			add_modifier = { 
				modifier = azur_R_mingshi_buff_01
				multiplier = azur_R_mingshi_buff_01
			}
		}
		if = {
			limit = {
				has_modifier = azur_R_mingshi_buff_02
			}
			change_variable = {
				which = azur_R_mingshi_buff_02
				value = 1
			}
			remove_modifier = azur_R_mingshi_buff_02
			add_modifier = { 
				modifier = azur_R_mingshi_buff_02
				multiplier = azur_R_mingshi_buff_02
			}
		}
		if = {
			limit = {
				has_modifier = azur_R_mingshi_buff_03
			}
			change_variable = {
				which = azur_R_mingshi_buff_03
				value = 1
			}
			remove_modifier = azur_R_mingshi_buff_03
			add_modifier = { 
				modifier = azur_R_mingshi_buff_03
				multiplier = azur_R_mingshi_buff_03
			}
		}
		if = {
			limit = {
				has_modifier = azur_R_mingshi_buff_04
			}
			change_variable = {
				which = azur_R_mingshi_buff_04
				value = 1
			}
			remove_modifier = azur_R_mingshi_buff_04
			add_modifier = { 
				modifier = azur_R_mingshi_buff_04
				multiplier = azur_R_mingshi_buff_04
			}
		}
		if = {
			limit = {
				has_modifier = azur_R_mingshi_buff_05
			}
			change_variable = {
				which = azur_R_mingshi_buff_05
				value = 1
			}
			remove_modifier = azur_R_mingshi_buff_05
			add_modifier = { 
				modifier = azur_R_mingshi_buff_05
				multiplier = azur_R_mingshi_buff_05
			}
		}
	}
}

#契约
country_event = {
	id = azur_mingshi.27
	title = "azur_mingshi.27.name"
	desc = "azur_mingshi.27.desc"
	picture = GFX_azurlane_mingshi_3
	#show_sound = event_red_alert
	location = root
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_country_flag = azur_xieshen_buff_end }
	}
	
	immediate = {
		set_timed_country_flag = { flag = azur_xieshen_buff_end months = 1 }
	}
	
	option = { #...
		name = azur_mingshi.27.a
		default_hide_option = yes
	}
}

#购买戒指
country_event = {
	id = azur_mingshi.28
	title = azur_mingshi.28.title
	desc = "azur_mingshi.28.a.desc"
	desc = "how_many_azur_jiezhi_reply"
	is_triggered_only = yes
	diplomatic = yes

	custom_gui = AZUR_R_商店_UI 								#界面
	
	immediate = {
		set_country_flag = AL_R_商店_戒指
	}
	
	after = {
		remove_country_flag = AL_R_商店_戒指
	}
	
	option = { #
		name = azur_event_opinion
		default_hide_option = yes
	}
}

#猫箱
country_event = {
	id = azur_mingshi.29
	title = azur_mingshi.29.title
	desc = "azur_mingshi.29.a.desc"
	is_triggered_only = yes
	diplomatic = yes

	custom_gui = AZUR_R_商店_UI 								#界面
	
	immediate = {
		set_country_flag = AL_R_商店_指挥猫
	}
	
	after = {
		remove_country_flag = AL_R_商店_指挥猫
	}
	
	option = { #
		name = azur_event_opinion
		default_hide_option = yes
	}
}