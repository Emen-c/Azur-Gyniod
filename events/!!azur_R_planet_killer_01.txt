namespace = AL_R_planet_kill
# Scope:
# this/root = planet that have been fired upon
# from = fleet that fired
planet_event = {
	id = AL_R_planet_kill.1
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		solar_system = { save_event_target_as = destroyed_system }
		solar_system = {
			destroy_star_system_AL_R = yes
		}
	}
}

#君命已决
planet_event = {
	id = AL_R_planet_kill.2
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#目标国家
		root.owner = { 
			save_global_event_target_as = AZUR_R_目标
			set_country_flag = AZUR_R_目标
		}
		#自己国家
		from.owner = { save_global_event_target_as = AZUR_R_原国家 }
		#夺舍
		event_target:AZUR_R_目标 = {
			set_player = event_target:AZUR_R_原国家
		}
	}
}

#希
planet_event = {
	id = AL_R_planet_kill.3
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		clear_deposits = yes
		#检测人口
		while = {
			count = trigger:num_pops
			add_deposit = d_minerals_1
		}
		#爆破
		every_owned_pop = {
			kill_pop = yes
		}
		remove_all_buildings = yes
		change_pc = pc_shattered
		while = {
			count = 40
			add_deposit = d_minerals_10
		}
	}
}
